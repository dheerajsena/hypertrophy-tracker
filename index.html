<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Full-Stack Fitness App</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #FFFFFF;
      --card-bg: #F8FAFC;
      --primary: #E53935;
      --text: #1F2937;
      --muted: #6B7280;
      --border: #E5E7EB;
      --radius: 8px;
      --shadow: rgba(0,0,0,0.05);
    }
    *, *::before, *::after { box-sizing: border-box; }
    body { margin:0; font-family:'Inter',sans-serif; background:var(--bg); color:var(--text); }
    header { background:var(--card-bg); padding:16px; box-shadow:0 2px 4px var(--shadow); text-align:center; }
    header h1 { margin:0;font-size:1.75rem;color:var(--primary);font-weight:700; }
    header p { margin:4px 0 0;color:var(--muted);font-size:0.95rem; }
    main { padding:16px; max-width:720px; margin:auto; }
    .metric-card, .exercise-card, .info-card { background:var(--card-bg); border-radius:var(--radius); box-shadow:0 2px 8px var(--shadow); margin-bottom:16px; padding:16px; }
    .metric-card h2, .exercise-card h2, .info-card h2 { margin:0 0 8px; font-size:1.1rem; font-weight:600; color:var(--text); }
    .metrics { display:flex; flex-wrap:wrap; gap:12px; justify-content:space-between; }
    .metric { flex:1 1 45%; background:#fff; border:1px solid var(--border); border-radius:var(--radius); padding:12px; text-align:center; }
    .metric span { display:block; font-size:1.25rem; font-weight:700; color:var(--primary); }
    .quote { font-style:italic; color:var(--muted); margin-top:8px; }
    .details { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:8px; }
    .details label { flex:0 0 80px; align-self:center; color:var(--muted); font-size:0.9rem; }
    .details input { flex:1; padding:8px; border:1px solid var(--border); border-radius:6px; font-size:0.95rem; color:var(--text); }
    .btn-group { display:flex; flex-wrap:wrap; gap:12px; margin-top:16px; }
    .btn { flex:1; padding:14px 0; background:var(--primary); color:#FFF; text-align:center; border:none; border-radius:var(--radius); font-size:1rem; cursor:pointer; }
    .btn:hover { opacity:0.9; }
    /* Manual exercise form */
    #manualForm { display:none; margin-bottom:16px; }
    /* Dashboard Modal */
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; padding:16px; }
    .modal-content { background:var(--card-bg); border-radius:var(--radius); max-width:500px; width:100%; max-height:90%; overflow-y:auto; padding:16px; position:relative; box-shadow:0 4px 12px var(--shadow); }
    .modal-close { position:absolute; top:12px; right:12px; font-size:1.25rem; color:var(--muted); cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <h1>Fitness Dashboard</h1>
    <p>Today is <span id="todayName"></span></p>
    <div class="quote" id="dailyQuote">"Consistency is the key to transformation."</div>
  </header>

  <main>
    <!-- Metrics Summary -->
    <section class="metric-card">
      <h2>Your Body Metrics</h2>
      <div class="metrics">
        <div class="metric"><label>Weight</label><span id="metricWeight">52.4kg</span></div>
        <div class="metric"><label>Body Fat</label><span id="metricFat">9.7%</span></div>
        <div class="metric"><label>Lean Mass</label><span id="metricLean">47.3kg</span></div>
        <div class="metric"><label>Goal</label><span id="metricGoal">+6kg Muscle</span></div>
      </div>
    </section>

    <!-- Info Cards -->
    <section class="info-card">
      <h2>Nutrition & Meals</h2>
      <p>Macros: Protein 110g • Carbs 300g • Fats 65g</p>
      <ul>
        <li>Breakfast: Whey + Banana + Almonds</li>
        <li>Lunch: Brown Rice + Chicken Curry + Dal</li>
        <li>Snack: Paneer Bhurji</li>
        <li>Dinner: Rotis + Palak Paneer + Dal</li>
      </ul>
    </section>

    <section class="info-card">
      <h2>Recovery & Posture</h2>
      <ul>
        <li>Sauna: 2x/week</li>
        <li>Foam Roll Daily</li>
        <li>Wall Angels: 5min/day</li>
      </ul>
    </section>

    <!-- Manual Exercise Addition -->
    <section id="manualForm" class="exercise-card">
      <h2>Add Custom Exercise</h2>
      <div class="details"><label>Name</label><input id="manName" type="text" placeholder="Exercise name" /></div>
      <div class="details"><label>Reps</label><input id="manReps" type="text" placeholder="e.g. 3x15" /></div>
      <div class="details"><label>Weight</label><input id="manWt" type="text" placeholder="e.g. 20kg" /></div>
      <button class="btn" id="addManual">Add Exercise</button>
    </section>

    <!-- Today's Workout -->
    <div id="exerciseList"></div>

    <div class="btn-group">
      <button class="btn" id="toggleManual">Add Manual Exercise</button>
      <button class="btn" id="submitBtn">Submit Today's Log</button>
      <button class="btn" id="viewDashboard">View Dashboard</button>
    </div>
  </main>

  <!-- Dashboard Modal -->
  <div class="modal" id="dashboardModal">
    <div class="modal-content">
      <span class="modal-close" id="closeModal">&times;</span>
      <h2>Progress Dashboard</h2>
      <select id="viewSelect">
        <option value="week">Week View</option>
        <option value="month">Month View</option>
      </select>
      <canvas id="progressChart" style="margin-top:16px;"></canvas>
    </div>
  </div>

  <script>
    // Plan definition with ability to mutate
    let plan = { /*... same as before ...*/ };
    plan.Monday = [...(plan.Monday||[])];
    // Load existing logs
    const logsKey = 'workoutLogs';

    // Day detection
    const today = new Date().toLocaleDateString('en-US',{weekday:'long'});
    document.getElementById('todayName').textContent = today;

    // Render exercises including manual
    function renderExercises() {
      const container = document.getElementById('exerciseList');
      container.innerHTML = '';
      (plan[today]||[]).forEach(ex => {
        const card = document.createElement('div');
        card.className='exercise-card';
        card.innerHTML = `<h2>${ex}</h2>
          <div class="details"><label>Sets/Reps</label><input id="rep_${ex}" placeholder="e.g.4x12" /></div>
          <div class="details"><label>Weight</label><input id="wt_${ex}" placeholder="e.g.30kg" /></div>
          <div class="details"><label>Skipped</label><input id="skip_${ex}" type="checkbox" /></div>
        `;
        container.appendChild(card);
      });
    }

    // Toggle manual form
    document.getElementById('toggleManual').onclick = () => {
      const f = document.getElementById('manualForm');
      f.style.display = f.style.display==='block'?'none':'block';
    };
    document.getElementById('addManual').onclick = () => {
      const name = document.getElementById('manName').value;
      if(name) { plan[today].push(name); renderExercises(); }
    };

    // Save log
    document.getElementById('submitBtn').onclick = () => {
      const logs = JSON.parse(localStorage.getItem(logsKey)||'{}');
      logs[today] = plan[today].map(ex=>({ exercise:ex,
        reps:document.getElementById(`rep_${ex}`)?.value||'-',
        weight:document.getElementById(`wt_${ex}`)?.value||'-',
        skipped:document.getElementById(`skip_${ex}`)?.checked||false
      }));
      localStorage.setItem(logsKey, JSON.stringify(logs));
      alert('Workout logged!');
    };

    // Dashboard
    const modal=document.getElementById('dashboardModal');
    const ctx=document.getElementById('progressChart').getContext('2d'); let chart;
    document.getElementById('viewDashboard').onclick=()=>{ modal.style.display='flex'; drawChart(); };
    document.getElementById('closeModal').onclick=()=>modal.style.display='none';
    document.getElementById('viewSelect').onchange=drawChart;

    function drawChart(){
      const view=document.getElementById('viewSelect').value;
      const logs=JSON.parse(localStorage.getItem(logsKey)||'{}');
      const dates=Object.keys(logs).slice(- (view==='week'?7:30));
      const data=dates.map(d=>logs[d].filter(l=>!l.skipped).length);
      if(chart) chart.destroy();
      chart=new Chart(ctx,{type:'bar',data:{labels:dates,datasets:[{label:'Completed',data,backgroundColor:'rgba(229,57,53,0.6)'}]},options:{scales:{y:{beginAtZero:true}}}});
    }

    // Initial render
    renderExercises();
  </script>
</body>
</html>
